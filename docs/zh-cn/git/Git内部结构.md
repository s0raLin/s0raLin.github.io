正如你可能记得的那样，**Git 是一个版本控制系统**。但是这个定义背后究竟意味着什么？Git 是如何工作的？为什么它如此方便？

在后续的实践章节里，我们会展示一些具体的例子，教你如何用 Git 来进行项目的版本管理。但在此之前，我们需要先从整体上理解一些基本概念。**使用 Git 的主要任务就是对项目进行版本管理**。为此，你需要：

- **工作工具** —— 它们位于在新建仓库时生成的 **.git 文件夹** 中；
    
- **跟踪文件状态** —— 以便了解项目当前所处的阶段，以及接下来的发展方向；
    
- **提交更改（commit）** —— 当文件修改完成后，将更改记录保存到项目历史中。
    

因此，描述 Git 工作逻辑的三个关键概念就是：  
**.git 文件夹、git commit、文件的不同状态阶段（file stages）**。接下来我们逐一来看。

---

### .git 文件夹

当你新建一个仓库时，系统会生成一个 **.git 文件夹**。它包含了使用 Git 所需的一切内容。即使你删除它，项目文件也会保留在磁盘上，但此时项目将不再受 Git 管理。

在你第一次提交之前，一个典型的 `.git` 文件夹中可能包含：

- **HEAD** —— 一个指针文件，指向当前所在的分支或提交；
    
- **config** —— 位于 `.git/config` 的配置文件，存储与当前仓库相关的设置，例如远程仓库地址、用户名和邮箱等；
    
- **description** —— 被 Gitweb 界面用来展示仓库的描述信息；
    
- **hooks** —— 存放各种 Git 钩子脚本（如推送前执行代码风格检查的脚本）；
    
- **info-exclude** —— 配置不想加入版本控制的文件。
    

---

### Git 文件状态

在 Git 中，文件可能处于三种状态之一：

1. **已提交（committed）** —— 文件已保存到本地数据库中；
    
2. **已修改（modified）** —— 文件内容发生了变化，但尚未保存到数据库；
    
3. **已暂存（staged）** —— 修改过的文件被标记，将会包含在下次提交中。
    

---

### Git 的三大核心区域

因此，Git 项目的架构中有三个主要部分：

1. **Git 目录（.git）** —— 存放项目的元数据和对象数据库，这是 Git 最重要的部分。克隆仓库时，这部分会被复制。
    
2. **工作目录（working directory）** —— 项目某个版本的快照，被解压缩后放在磁盘上，供你查看和修改。
    
3. **暂存区（staging area / index）** —— 位于 `.git` 目录中的一个文件，记录哪些更改会进入下一个提交。
    

操作流程通常是这样的：

- 在工作目录中修改文件；
    
- 使用 `git add` 将文件添加到暂存区；
    
- 执行 `git commit`，将暂存区的快照保存到 `.git` 目录。
    

---

### Git Commit

Git 的整个结构很大程度上是为了**保存项目的当前版本**。  
如果没有提交功能，当文件被错误修改后，你将无法恢复之前的版本。

每次执行 **commit**，Git 都会保存项目在当下的快照。为了节省空间，如果某个文件没有变化，Git 不会重复保存它，而是创建一个指向之前版本的链接。

所有更改都会存储在本地数据库中（即 `.git` 目录）。这意味着：

- 你可以立即查看完整的项目历史；
    
- 你可以比较当前文件与一个月前的版本之间的差异；
    
- 这些操作完全在本地完成，无需联网。
    

此外，Git 在底层机制上保证：文件内容无法在不被察觉的情况下更改。这意味着你不会在文件传输或存储过程中意外丢失信息，或得到损坏的文件而 Git 却毫不知情。

---

### 总结

Git 的主要工作原理就是：**将工作目录中的文件归档并保存到对象数据库中，同时附带一些额外信息**。  
使用 Git，你可以完全掌控哪些文件会被提交，哪些不会。

---